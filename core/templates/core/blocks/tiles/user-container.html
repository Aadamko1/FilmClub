{% load util %}

<div id = "user-container" class = "tile">
	<input id = "profile-username" type = "text" value = "{{ profile.username }}" hidden>
	<div id = "user-cover">
		<div id = "user-image">
			<img src="{{ request.user.userprofile.profile_pic.url }}" style="border-radius: 50%; width: 100%; height: 100%;">
		</div>
	</div>
	<div id = "user-info">
		{% if user == profile %}
			
			<form id = "edit-name" method = "POST" action = "{% url 'core:edit_profile' profile.username %}">
				{% csrf_token %}
			
				<input class = "browser-default" type = "text" name = "first-name" value = "{{ profile.first_name }}">
				<input class = "browser-default" type = "text" name = "last-name" value = "{{ profile.last_name }}">
				<input id = "name-submit" type="submit" style="display: none">
			</form>
			
		{% else %}
			
			<p id = "user-full-name">
				{{ profile.get_full_name }}
			</p>
			
		{% endif %}
		
		<span id = "username-container">@<p id = "user-username">{{ profile.username }}</p></span>
	</div>
	
	{% if user != profile %}
	
		{% is_friend user profile as friended %}
	
		<div id = "user-friend" class = "{% if friended %}friend{% endif %}">
			<p class = "main-label">{% if friended %}Friends{% else %}Add Friend{% endif %}</p>
			<p class = "second-label">Unfriend</p>
		</div>
		
	{% endif %}
	<div id = "user-stats">
		<div class = "user-stat">
			<p class = "stat-label">Friends</p>
			<p id = "num-friends" class = "stat-number">{{ profile.userprofile.friends.all|length }}</p>
		</div>
		<div class = "user-stat">
			<p class = "stat-label"># Movies</p>
			<p id = "num-movies" class = "stat-number">{{ profile.userprofile.watched_movies.all|length }}</p>
		</div>
	</div>
	
	{% if show_view_button %}
		
		<a href = "{% url 'core:profile' username=profile.username %}">
			<div id = "user-options">
				<p>View Profile</p>
			</div>
		</a>
	
	{% endif %}
</div>